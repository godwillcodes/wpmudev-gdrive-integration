(()=>{var e={20:(e,t,i)=>{"use strict";var n=i(609),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,i){var n,r={},d=null,c=null;for(n in void 0!==i&&(d=""+i),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,n)&&!a.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:s,type:e,key:d,ref:c,props:r,_owner:l.current}}t.Fragment=r,t.jsx=d,t.jsxs=d},56:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var r={},o=[],l=0;l<e.length;l++){var a=e[l],d=n.base?a[0]+n.base:a[0],c=r[d]||0,u="".concat(d," ").concat(c);r[d]=c+1;var p=i(u),v={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==p)t[p].references++,t[p].updater(v);else{var m=s(v,n);n.byIndex=l,t.splice(l,0,{identifier:u,updater:m,references:1})}o.push(u)}return o}function s(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var r=n(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var l=i(r[o]);t[l].references--}for(var a=n(e,s),d=0;d<r.length;d++){var c=i(r[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=a}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},609:e=>{"use strict";e.exports=window.React},659:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},673:()=>{},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},848:(e,t,i)=>{"use strict";e.exports=i(20)}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,n=window.wp.components;var s=i(72),r=i.n(s),o=i(825),l=i.n(o),a=i(659),d=i.n(a),c=i(56),u=i.n(c),p=i(540),v=i.n(p),m=i(113),w=i.n(m),h=i(673),g=i.n(h),_={};_.styleTagTransform=w(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=l(),_.insertStyleElement=v();r()(g(),_);g()&&g().locals&&g().locals;var f=i(848);function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach(function(t){y(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function y(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const b=()=>(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",style:{width:"16px",height:"16px",marginRight:"6px"},children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),N=()=>(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",style:{width:"16px",height:"16px",marginRight:"6px"},children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),C=()=>(0,f.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"6px"},children:(0,f.jsx)("path",{d:"M3 15L3 16C3 17.1046 3.89543 18 5 18L15 18C16.1046 18 17 17.1046 17 16L17 15M13 10L10 13M10 13L7 10M10 13L10 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),S=()=>(0,f.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"6px"},children:(0,f.jsx)("path",{d:"M12 15L7 10L12 5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),D=()=>(0,f.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginLeft:"6px"},children:(0,f.jsx)("path",{d:"M8 5L13 10L8 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),T=document.getElementById(window.wpmudevDriveTest.dom_element_id),P=e=>{if(!e||0===e)return"-";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB","TB"][t]},k=()=>{const[i,s]=(0,e.useState)(window.wpmudevDriveTest.authStatus||!1),[r,o]=(0,e.useState)(window.wpmudevDriveTest.hasCredentials||!1),[l,a]=(0,e.useState)(!window.wpmudevDriveTest.hasCredentials),[d,c]=(0,e.useState)(!1),[u,p]=(0,e.useState)(0),[v,m]=(0,e.useState)([]),[w,h]=(0,e.useState)(null),[g,_]=(0,e.useState)(""),[x,y]=(0,e.useState)({message:"",type:""}),[T,k]=(0,e.useState)(!1),[O,L]=(0,e.useState)({clientId:"",clientSecret:""}),[I,E]=(0,e.useState)(null),[A,M]=(0,e.useState)([]),[F,R]=(0,e.useState)(1),[B,G]=(0,e.useState)(!1),U=(0,e.useCallback)(function(e){y({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(()=>y({message:"",type:""}),5e3)},[]);(0,e.useEffect)(()=>{s(window.wpmudevDriveTest.authStatus||!1),o(window.wpmudevDriveTest.hasCredentials||!1);const e=new URLSearchParams(window.location.search),i=e.get("auth"),n=e.get("error_message");if("success"===i)s(!0),U((0,t.__)("Successfully authenticated with Google Drive!","wpmudev-plugin-test"),"success"),window.history.replaceState({},document.title,window.location.pathname);else if("error"===i){const e=n?decodeURIComponent(n):(0,t.__)("Authentication failed. Please try again.","wpmudev-plugin-test");U(e,"error"),window.history.replaceState({},document.title,window.location.pathname)}},[U]);const W=[{id:"credentials",label:(0,t.__)("Credentials","wpmudev-plugin-test"),value:r?(0,t.__)("Configured","wpmudev-plugin-test"):(0,t.__)("Missing","wpmudev-plugin-test"),description:r?(0,t.__)("Client ID and Secret stored securely.","wpmudev-plugin-test"):(0,t.__)("Add your Google Cloud keys to continue.","wpmudev-plugin-test"),state:r?"success":"error"},{id:"auth",label:(0,t.__)("Authentication","wpmudev-plugin-test"),value:i?(0,t.__)("Connected","wpmudev-plugin-test"):(0,t.__)("Not connected","wpmudev-plugin-test"),description:i?(0,t.__)("Ready to manage Drive content.","wpmudev-plugin-test"):(0,t.__)("Authenticate to unlock Drive actions.","wpmudev-plugin-test"),state:i?"success":"error"}],z=async()=>{try{c(!0);await fetch("".concat(window.location.origin,"/wp-json/wpmudev/v1/drive/disconnect"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce}});L({clientId:"",clientSecret:""}),o(!1),s(!1),m([]),E(null),G(!1),R(1),M([]),a(!0),c(!1)}catch(e){L({clientId:"",clientSecret:""}),o(!1),s(!1),m([]),E(null),G(!1),R(1),M([]),a(!0),c(!1)}},X=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{c(!0);const n=new URL("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointFiles));n.searchParams.set("page_size","10"),e&&n.searchParams.set("page_token",e);const s=await fetch(n.toString(),{method:"GET",headers:{"X-WP-Nonce":window.wpmudevDriveTest.nonce}}),r=await s.json();if(!s.ok){const e=(null==r?void 0:r.message)||(null==r?void 0:r.code)||(0,t.__)("Failed to load files. Please try again.","wpmudev-plugin-test");return void U(e,"error")}const o=(null==r?void 0:r.files)||(Array.isArray(r)?r:(null==r?void 0:r.data)||[]);m(o);const l=(null==r?void 0:r.nextPageToken)||null;E(l),G((null==r?void 0:r.hasMore)||!!l),i&&e?(M(t=>{const i=[...t];for(;i.length<F+1;)i.push(null);return i[F]=e,i}),R(e=>e+1)):e||(M([null]),R(1))}catch(e){U((0,t.__)("An unexpected error occurred while loading files.","wpmudev-plugin-test"),"error")}finally{c(!1)}};return(0,e.useEffect)(()=>{i&&X(null,!1)},[i]),(0,f.jsxs)("div",{className:"sui-wrap wpmudev-drive-app",children:[(0,f.jsxs)("div",{className:"sui-header wpmudev-drive-header",children:[(0,f.jsx)("h1",{className:"sui-header-title",children:(0,t.__)("Google Drive Test","wpmudev-plugin-test")}),(0,f.jsx)("p",{className:"sui-description",children:(0,t.__)("Test Google Drive API integration for applicant assessment.","wpmudev-plugin-test")})]}),x.message&&(0,f.jsx)(n.Notice,{status:x.type,isDismissible:!0,onRemove:()=>y({message:"",type:""}),children:x.message}),(0,f.jsx)("div",{className:"wpmudev-drive-overview",children:W.map(e=>(0,f.jsxs)("div",{className:"wpmudev-overview-card state-".concat(e.state),children:[(0,f.jsx)("span",{className:"wpmudev-overview-label",children:e.label}),(0,f.jsx)("strong",{className:"wpmudev-overview-value",children:e.value}),(0,f.jsx)("p",{className:"wpmudev-overview-description",children:e.description})]},e.id))}),(0,f.jsx)("div",{className:"wpmudev-drive-content",children:l?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"wpmudev-drive-grid wpmudev-drive-grid--credentials",children:(0,f.jsxs)("div",{className:"sui-box wpmudev-drive-panel wpmudev-drive-panel--credentials",children:[(0,f.jsx)("div",{className:"sui-box-header",children:(0,f.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Set Google Drive Credentials","wpmudev-plugin-test")})}),(0,f.jsxs)("div",{className:"sui-box-body",children:[(0,f.jsx)("div",{className:"sui-box-settings-row wpmudev-drive-scopes-row",children:(0,f.jsx)(n.TextControl,{help:(0,e.createInterpolateElement)((0,t.__)("You can get Client ID from <a>Google Cloud Console</a>. Make sure to enable Google Drive API.","wpmudev-plugin-test"),{a:(0,f.jsx)("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})}),label:(0,t.__)("Client ID","wpmudev-plugin-test"),value:O.clientId,onChange:e=>L(j(j({},O),{},{clientId:e}))})}),(0,f.jsx)("div",{className:"sui-box-settings-row wpmudev-drive-secret-row",children:(0,f.jsx)(n.TextControl,{help:(0,e.createInterpolateElement)((0,t.__)("You can get Client Secret from <a>Google Cloud Console</a>.","wpmudev-plugin-test"),{a:(0,f.jsx)("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})}),label:(0,t.__)("Client Secret","wpmudev-plugin-test"),value:O.clientSecret,onChange:e=>L(j(j({},O),{},{clientSecret:e})),type:"password"})}),(0,f.jsx)("div",{className:"sui-box-settings-row",children:(0,f.jsxs)("span",{children:[(0,t.__)("Please use this URL","wpmudev-plugin-test")," ",(0,f.jsx)("em",{children:window.wpmudevDriveTest.redirectUri})," ",(0,t.__)("in your Google API's Authorized redirect URIs field.","wpmudev-plugin-test")]})}),(0,f.jsxs)("div",{className:"sui-box-settings-row wpmudev-drive-required-scopes",children:[(0,f.jsx)("strong",{children:(0,t.__)("Required scopes for Google Drive API:","wpmudev-plugin-test")}),(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:"https://www.googleapis.com/auth/drive.file"}),(0,f.jsx)("li",{children:"https://www.googleapis.com/auth/drive.readonly"})]})]})]}),(0,f.jsx)("div",{className:"sui-box-footer",children:(0,f.jsx)("div",{className:"sui-actions-right",children:(0,f.jsx)(n.Button,{className:"wpmudev-drive-primary",variant:"primary",onClick:async()=>{if(O.clientId.trim()&&O.clientSecret.trim())try{c(!0);const e=await fetch("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointSave),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce},body:JSON.stringify({client_id:O.clientId.trim(),client_secret:O.clientSecret.trim()})}),i=await e.json();if(!e.ok||null==i||!i.success){const e=(null==i?void 0:i.message)||(0,t.__)("Failed to save credentials. Please try again.","wpmudev-plugin-test");return void U(e,"error")}o(!0),a(!1),s(!1),m([]),E(null),G(!1),R(1),M([]),U((0,t.__)("Credentials saved successfully.","wpmudev-plugin-test"),"success")}catch(e){U((0,t.__)("An unexpected error occurred while saving credentials.","wpmudev-plugin-test"),"error")}finally{c(!1)}else U((0,t.__)("Both Client ID and Client Secret are required.","wpmudev-plugin-test"),"error")},disabled:d,children:d?(0,f.jsx)(n.Spinner,{}):(0,t.__)("Save Credentials","wpmudev-plugin-test")})})})]})}),(0,f.jsx)("div",{className:"wpmudev-drive-guidance-container",children:(0,f.jsx)("div",{className:"sui-box wpmudev-drive-panel wpmudev-drive-guidance",children:(0,f.jsxs)("div",{className:"wpmudev-drive-guidance__body",children:[(0,f.jsx)("h3",{children:(0,t.__)("Google Cloud checklist","wpmudev-plugin-test")}),(0,f.jsxs)("ol",{children:[(0,f.jsx)("li",{children:(0,t.__)("Enable the Google Drive API for your project.","wpmudev-plugin-test")}),(0,f.jsx)("li",{children:(0,t.__)("Create an OAuth client (Web Application).","wpmudev-plugin-test")}),(0,f.jsx)("li",{children:(0,t.__)("Add the redirect URI shown on this page.","wpmudev-plugin-test")}),(0,f.jsx)("li",{children:(0,t.__)("Paste the Client ID and Secret into this form.","wpmudev-plugin-test")})]}),(0,f.jsx)("p",{children:(0,t.__)("We encrypt secrets at rest. Rotate them any time from this screen.","wpmudev-plugin-test")})]})})})]}):i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"wpmudev-drive-grid wpmudev-drive-grid--actions",children:[(0,f.jsxs)("div",{className:"sui-box wpmudev-drive-panel wpmudev-drive-panel--upload",children:[(0,f.jsxs)("div",{className:"sui-box-header",children:[(0,f.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Upload file to drive","wpmudev-plugin-test")}),(0,f.jsx)("p",{className:"sui-description",children:(0,t.__)("Drag and drop files here or click to browse.","wpmudev-plugin-test")})]}),(0,f.jsx)("div",{className:"sui-box-body",children:(0,f.jsx)("div",{className:"sui-box-settings-row wpmudev-drive-upload-row",children:(0,f.jsx)("div",{className:"wpmudev-drive-dropzone ".concat(T?"is-dragging":""," ").concat(w?"has-file":""),onDragOver:e=>{e.preventDefault(),e.stopPropagation(),k(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),k(!1)},onDrop:e=>{var t;e.preventDefault(),e.stopPropagation(),k(!1);const i=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];i&&h(i)},children:(0,f.jsxs)("div",{className:"wpmudev-drive-file-input-wrapper",children:[(0,f.jsxs)("label",{className:"wpmudev-drive-file-label",children:[(0,f.jsx)("input",{type:"file",onChange:e=>{var t;return h((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"drive-file-input",disabled:d}),(0,f.jsx)("span",{className:"wpmudev-drive-file-label-text",children:w?(0,t.__)("Change file","wpmudev-plugin-test"):(0,t.__)("Choose file","wpmudev-plugin-test")})]}),w&&(0,f.jsxs)("div",{className:"wpmudev-drive-file-info",children:[(0,f.jsx)("strong",{children:(0,t.__)("Selected:","wpmudev-plugin-test")})," ",(0,f.jsx)("span",{className:"wpmudev-drive-file-name",children:w.name}),(0,f.jsxs)("span",{className:"wpmudev-drive-file-size",children:["(",P(w.size),")"]})]}),d&&u>0&&(0,f.jsxs)("div",{className:"wpmudev-drive-upload-progress",children:[(0,f.jsx)("div",{className:"wpmudev-drive-progress-bar-wrapper",children:(0,f.jsx)("div",{className:"wpmudev-drive-progress-bar",style:{width:"".concat(u,"%")}})}),(0,f.jsxs)("div",{className:"wpmudev-drive-progress-text",children:[(0,t.__)("Uploading:","wpmudev-plugin-test")," ",u,"%"]})]})]})})})}),(0,f.jsx)("div",{className:"sui-box-footer",children:(0,f.jsx)("div",{className:"sui-actions-right",children:(0,f.jsx)(n.Button,{variant:"primary",onClick:async()=>{if(w)return c(!0),p(0),new Promise((e,i)=>{const n=new FormData;n.append("file",w);const s=new XMLHttpRequest;s.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);p(t)}}),s.addEventListener("load",async()=>{if(s.status>=200&&s.status<300)try{const n=JSON.parse(s.responseText);if(null==n||!n.success){const e=(null==n?void 0:n.message)||(null==n?void 0:n.code)||(0,t.__)("Failed to upload file. Please try again.","wpmudev-plugin-test");return U(e,"error"),c(!1),p(0),void i(new Error(e))}h(null);const r=document.querySelector(".drive-file-input");r&&(r.value=""),U((0,t.__)("File uploaded successfully!","wpmudev-plugin-test"),"success"),await X(null,!1),c(!1),p(0),e(n)}catch(e){U((0,t.__)("Failed to parse server response.","wpmudev-plugin-test"),"error"),c(!1),p(0),i(e)}else{let e=(0,t.__)("Failed to upload file. Please try again.","wpmudev-plugin-test");try{const t=JSON.parse(s.responseText);e=(null==t?void 0:t.message)||(null==t?void 0:t.code)||e}catch(e){}U(e,"error"),c(!1),p(0),i(new Error(e))}}),s.addEventListener("error",()=>{U((0,t.__)("An unexpected error occurred while uploading the file.","wpmudev-plugin-test"),"error"),c(!1),p(0),i(new Error("Network error"))}),s.addEventListener("abort",()=>{U((0,t.__)("Upload was cancelled.","wpmudev-plugin-test"),"error"),c(!1),p(0),i(new Error("Upload cancelled"))}),s.open("POST","".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointUpload)),s.setRequestHeader("X-WP-Nonce",window.wpmudevDriveTest.nonce),s.send(n)});U((0,t.__)("Please select a file to upload.","wpmudev-plugin-test"),"error")},disabled:d||!w,children:d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Spinner,{}),u>0?"".concat(u,"%"):(0,t.__)("Uploading...","wpmudev-plugin-test")]}):(0,t.__)("Upload to drive","wpmudev-plugin-test")})})})]}),(0,f.jsxs)("div",{className:"sui-box wpmudev-drive-panel wpmudev-drive-panel--folder",children:[(0,f.jsxs)("div",{className:"sui-box-header",children:[(0,f.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Create new folder","wpmudev-plugin-test")}),(0,f.jsx)("p",{className:"sui-description",children:(0,t.__)("Organize your files with custom folders.","wpmudev-plugin-test")})]}),(0,f.jsx)("div",{className:"sui-box-body",children:(0,f.jsx)("div",{className:"sui-box-settings-row",children:(0,f.jsx)(n.TextControl,{label:(0,t.__)("Folder name","wpmudev-plugin-test"),value:g,onChange:_,placeholder:(0,t.__)("Enter folder name","wpmudev-plugin-test")})})}),(0,f.jsx)("div",{className:"sui-box-footer",children:(0,f.jsx)("div",{className:"sui-actions-right",children:(0,f.jsx)(n.Button,{variant:"secondary",onClick:async()=>{const e=g.trim();if(e)try{c(!0);const i=await fetch("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointCreate),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce},body:JSON.stringify({name:e})}),n=await i.json();if(!i.ok||null==n||!n.success){const e=(null==n?void 0:n.message)||(null==n?void 0:n.code)||(0,t.__)("Failed to create folder. Please try again.","wpmudev-plugin-test");return void U(e,"error")}_(""),U((0,t.__)("Folder created successfully!","wpmudev-plugin-test"),"success"),await X(null,!1)}catch(e){U((0,t.__)("An unexpected error occurred while creating the folder.","wpmudev-plugin-test"),"error")}finally{c(!1)}else U((0,t.__)("Please enter a folder name.","wpmudev-plugin-test"),"error")},disabled:d||!g.trim(),children:d?(0,f.jsx)(n.Spinner,{}):(0,t.__)("Create folder","wpmudev-plugin-test")})})})]})]}),(0,f.jsxs)("div",{className:"sui-box wpmudev-drive-panel wpmudev-drive-panel--full wpmudev-drive-panel--files",children:[(0,f.jsxs)("div",{className:"sui-box-header",children:[(0,f.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Your drive files","wpmudev-plugin-test")}),(0,f.jsxs)("div",{className:"sui-actions-right wpmudev-drive-files-actions",children:[(0,f.jsxs)("div",{className:"wpmudev-drive-actions-left",children:[(0,f.jsx)(n.Button,{variant:"secondary",className:"wpmudev-drive-connection-btn",onClick:z,disabled:d,children:(0,t.__)("Change credentials","wpmudev-plugin-test")}),(0,f.jsx)(n.Button,{variant:"secondary",className:"wpmudev-drive-disconnect-btn",onClick:async()=>{if(confirm((0,t.__)("Are you sure you want to disconnect from Google Drive? You will need to authenticate again to use Drive features.","wpmudev-plugin-test")))try{c(!0);const e=await fetch("".concat(window.location.origin,"/wp-json/wpmudev/v1/drive/disconnect"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce}}),i=await e.json();if(!e.ok||null==i||!i.success){const e=(null==i?void 0:i.message)||(0,t.__)("Failed to disconnect from Google Drive. Please try again.","wpmudev-plugin-test");return U(e,"error"),void c(!1)}s(!1),m([]),E(null),G(!1),R(1),M([]),U((null==i?void 0:i.message)||(0,t.__)("Successfully disconnected from Google Drive.","wpmudev-plugin-test"),"success"),c(!1)}catch(e){U((0,t.__)("An unexpected error occurred while disconnecting.","wpmudev-plugin-test"),"error"),c(!1)}},disabled:d,children:d?(0,f.jsx)(n.Spinner,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N,{}),(0,t.__)("Disconnect","wpmudev-plugin-test")]})})]}),(0,f.jsx)("div",{className:"wpmudev-drive-actions-right",children:(0,f.jsx)(n.Button,{variant:"secondary",onClick:X,disabled:d,children:d?(0,f.jsx)(n.Spinner,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{}),(0,t.__)("Refresh files","wpmudev-plugin-test")]})})})]})]}),(0,f.jsx)("div",{className:"sui-box-body",children:d?(0,f.jsxs)("div",{className:"drive-loading",children:[(0,f.jsx)(n.Spinner,{}),(0,f.jsx)("p",{children:(0,t.__)("Loading files…","wpmudev-plugin-test")})]}):v.length>0?(0,f.jsxs)("div",{className:"wpmudev-drive-files-table",children:[(0,f.jsxs)("table",{className:"sui-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:(0,t.__)("Name","wpmudev-plugin-test")}),(0,f.jsx)("th",{children:(0,t.__)("Type","wpmudev-plugin-test")}),(0,f.jsx)("th",{children:(0,t.__)("Size","wpmudev-plugin-test")}),(0,f.jsx)("th",{children:(0,t.__)("Modified","wpmudev-plugin-test")}),(0,f.jsx)("th",{children:(0,t.__)("Actions","wpmudev-plugin-test")})]})}),(0,f.jsx)("tbody",{children:v.map(e=>{const i="application/vnd.google-apps.folder"===e.mimeType,s=e.size?P(e.size):"-",r=e.modifiedTime?new Date(e.modifiedTime).toLocaleString():(0,t.__)("Unknown","wpmudev-plugin-test"),o=i?(0,t.__)("Folder","wpmudev-plugin-test"):(e=>{if(!e)return(0,t.__)("File","wpmudev-plugin-test");if("application/vnd.google-apps.folder"===e)return(0,t.__)("Folder","wpmudev-plugin-test");if("application/vnd.google-apps.document"===e)return(0,t.__)("Google Doc","wpmudev-plugin-test");if("application/vnd.google-apps.spreadsheet"===e)return(0,t.__)("Google Sheet","wpmudev-plugin-test");if("application/vnd.google-apps.presentation"===e)return(0,t.__)("Google Slides","wpmudev-plugin-test");const i={"image/jpeg":(0,t.__)("Image","wpmudev-plugin-test"),"image/png":(0,t.__)("Image","wpmudev-plugin-test"),"image/gif":(0,t.__)("Image","wpmudev-plugin-test"),"image/webp":(0,t.__)("Image","wpmudev-plugin-test"),"application/pdf":(0,t.__)("PDF","wpmudev-plugin-test"),"text/plain":(0,t.__)("Text","wpmudev-plugin-test"),"application/zip":(0,t.__)("ZIP","wpmudev-plugin-test"),"application/json":(0,t.__)("JSON","wpmudev-plugin-test")};for(const[t,n]of Object.entries(i))if(e.startsWith(t.split("/")[0]+"/"))return n;const n=e.split("/")[0];return"image"===n?(0,t.__)("Image","wpmudev-plugin-test"):"video"===n?(0,t.__)("Video","wpmudev-plugin-test"):"audio"===n?(0,t.__)("Audio","wpmudev-plugin-test"):(0,t.__)("File","wpmudev-plugin-test")})(e.mimeType);return(0,f.jsxs)("tr",{className:"wpmudev-drive-file-row",children:[(0,f.jsx)("td",{className:"wpmudev-drive-file-name",children:(0,f.jsx)("strong",{children:e.name})}),(0,f.jsx)("td",{className:"wpmudev-drive-file-type",children:(0,f.jsx)("span",{className:"wpmudev-drive-type-badge ".concat(i?"folder":"file"),children:o})}),(0,f.jsx)("td",{className:"wpmudev-drive-file-size",children:s}),(0,f.jsx)("td",{className:"wpmudev-drive-file-date",children:r}),(0,f.jsx)("td",{className:"wpmudev-drive-file-actions",children:(0,f.jsxs)("div",{className:"wpmudev-drive-actions-group",children:[!i&&(0,f.jsxs)(n.Button,{variant:"link",size:"small",onClick:()=>(async(e,i)=>{if(e)try{c(!0);const n=await fetch("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointDownload,"?file_id=").concat(encodeURIComponent(e)),{method:"GET",headers:{"X-WP-Nonce":window.wpmudevDriveTest.nonce}}),s=await n.json();if(!n.ok||null==s||!s.success){const e=(null==s?void 0:s.message)||(null==s?void 0:s.code)||(0,t.__)("Failed to download file. Please try again.","wpmudev-plugin-test");return void U(e,"error")}const r=atob(s.content),o=new Blob([r],{type:s.mimeType||"application/octet-stream"}),l=window.URL.createObjectURL(o),a=document.createElement("a");a.href=l,a.download=i||s.filename||"download",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(l),U((0,t.__)("File downloaded successfully!","wpmudev-plugin-test"),"success")}catch(e){U((0,t.__)("An unexpected error occurred while downloading the file.","wpmudev-plugin-test"),"error")}finally{c(!1)}else U((0,t.__)("File ID is missing. Cannot download file.","wpmudev-plugin-test"),"error")})(e.id,e.name),disabled:d,className:"wpmudev-drive-action-btn",children:[(0,f.jsx)(C,{}),(0,t.__)("Download","wpmudev-plugin-test")]}),e.webViewLink&&(0,f.jsx)(n.Button,{variant:"link",size:"small",href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"wpmudev-drive-action-btn",children:(0,t.__)("View in drive","wpmudev-plugin-test")})]})})]},e.id)})})]}),(B||F>1)&&(0,f.jsxs)("div",{className:"wpmudev-drive-pagination",children:[(0,f.jsxs)("div",{className:"wpmudev-drive-pagination-info",children:[(0,t.__)("Page","wpmudev-plugin-test")," ",F," • ",v.length," ",(0,t.__)("items","wpmudev-plugin-test")]}),(0,f.jsxs)("div",{className:"wpmudev-drive-pagination-buttons",children:[(0,f.jsxs)(n.Button,{variant:"secondary",className:"wpmudev-drive-pagination-btn wpmudev-drive-pagination-btn--prev",onClick:()=>{if(F>1){const e=F-1,t=A[e]||null;R(e),X(t,!1)}else R(1),X(null,!1)},disabled:d||1===F,children:[(0,f.jsx)(S,{}),(0,t.__)("Previous","wpmudev-plugin-test")]}),(0,f.jsxs)(n.Button,{variant:"primary",className:"wpmudev-drive-pagination-btn wpmudev-drive-pagination-btn--next",onClick:()=>{I&&B&&X(I,!0)},disabled:d||!B,children:[(0,t.__)("Next","wpmudev-plugin-test"),(0,f.jsx)(D,{})]})]})]})]}):(0,f.jsx)("div",{className:"sui-box-settings-row",children:(0,f.jsx)("p",{children:(0,t.__)("No files found in your Drive. Upload a file or create a folder to get started.","wpmudev-plugin-test")})})})]})]}):(0,f.jsx)("div",{className:"wpmudev-drive-grid wpmudev-drive-grid--auth",children:(0,f.jsxs)("div",{className:"sui-box wpmudev-drive-panel wpmudev-drive-panel--auth",children:[(0,f.jsxs)("div",{className:"sui-box-header",children:[(0,f.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test")}),(0,f.jsx)("p",{className:"sui-description",children:(0,t.__)("Connect your Google Drive account to enable file uploads, folder creation, and file browsing. We never store your files.","wpmudev-plugin-test")})]}),(0,f.jsx)("div",{className:"sui-box-body",children:(0,f.jsx)("div",{className:"wpmudev-drive-auth-content",children:(0,f.jsxs)("div",{className:"wpmudev-drive-auth-scopes",children:[(0,f.jsx)("p",{className:"wpmudev-drive-auth-scopes-title",children:(0,t.__)("This connection will be able to:","wpmudev-plugin-test")}),(0,f.jsxs)("ul",{className:"wpmudev-drive-scopes-list",children:[(0,f.jsx)("li",{children:(0,t.__)("View and manage Google Drive files","wpmudev-plugin-test")}),(0,f.jsx)("li",{children:(0,t.__)("Upload new files to Drive","wpmudev-plugin-test")}),(0,f.jsx)("li",{children:(0,t.__)("Create folders in Drive","wpmudev-plugin-test")})]})]})})}),(0,f.jsx)("div",{className:"sui-box-footer",children:(0,f.jsxs)("div",{className:"wpmudev-drive-auth-actions",children:[(0,f.jsx)(n.Button,{variant:"secondary",className:"wpmudev-drive-auth-change",onClick:z,disabled:d,children:d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Spinner,{}),(0,t.__)("Clearing...","wpmudev-plugin-test")]}):(0,t.__)("Change credentials","wpmudev-plugin-test")}),(0,f.jsx)(n.Button,{className:"wpmudev-drive-auth-primary",variant:"primary",onClick:async()=>{if(r)try{c(!0);const e=await fetch("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointAuth),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce}}),i=await e.json();if(!e.ok||null==i||!i.success){const e=(null==i?void 0:i.message)||(null==i?void 0:i.code)||(0,t.__)("Failed to start authentication. Please try again.","wpmudev-plugin-test");return U(e,"error"),void c(!1)}i.auth_url?window.location.href=i.auth_url:(U((0,t.__)("Invalid response from server. Please try again.","wpmudev-plugin-test"),"error"),c(!1))}catch(e){U((0,t.__)("An unexpected error occurred while starting authentication.","wpmudev-plugin-test"),"error"),c(!1)}else U((0,t.__)("Please save your Google Drive credentials first.","wpmudev-plugin-test"),"error")},disabled:d,children:d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Spinner,{}),(0,t.__)("Connecting...","wpmudev-plugin-test")]}):(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test")})]})})]})})})]})};e.createRoot?(0,e.createRoot)(T).render((0,f.jsx)(e.StrictMode,{children:(0,f.jsx)(k,{})})):(0,e.render)((0,f.jsx)(e.StrictMode,{children:(0,f.jsx)(k,{})}),T)})()})();
//# sourceMappingURL=drivetestpage.min.js.map