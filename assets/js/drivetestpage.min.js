(()=>{var e={20:(e,t,s)=>{"use strict";var i=s(609),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var i,n={},c=null,d=null;for(i in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===n[i]&&(n[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:d,props:n,_owner:o.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},56:(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function s(e){for(var s=-1,i=0;i<t.length;i++)if(t[i].identifier===e){s=i;break}return s}function i(e,i){for(var n={},a=[],o=0;o<e.length;o++){var l=e[o],c=i.base?l[0]+i.base:l[0],d=n[c]||0,u="".concat(c," ").concat(d);n[c]=d+1;var p=s(u),v={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(v);else{var m=r(v,i);i.byIndex=o,t.splice(o,0,{identifier:u,updater:m,references:1})}a.push(u)}return a}function r(e,t){var s=t.domAPI(t);s.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var n=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<n.length;a++){var o=s(n[a]);t[o].references--}for(var l=i(e,r),c=0;c<n.length;c++){var d=s(n[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=l}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},609:e=>{"use strict";e.exports=window.React},659:e=>{"use strict";var t={};e.exports=function(e,s){var i=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},673:()=>{},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,r&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var n=s.sourceMap;n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},848:(e,t,s)=>{"use strict";e.exports=s(20)}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nc=void 0,(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,i=window.wp.components;var r=s(72),n=s.n(r),a=s(825),o=s.n(a),l=s(659),c=s.n(l),d=s(56),u=s.n(d),p=s(540),v=s.n(p),m=s(113),h=s.n(m),w=s(673),g=s.n(w),f={};f.styleTagTransform=h(),f.setAttributes=u(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=v();n()(g(),f);g()&&g().locals&&g().locals;var x=s(848);function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach(function(t){y(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function y(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=document.getElementById(window.wpmudevDriveTest.dom_element_id),N=()=>{const[s,r]=(0,e.useState)(window.wpmudevDriveTest.authStatus||!1),[n,a]=(0,e.useState)(window.wpmudevDriveTest.hasCredentials||!1),[o,l]=(0,e.useState)(!window.wpmudevDriveTest.hasCredentials),[c,d]=(0,e.useState)(!1),[u,p]=(0,e.useState)([]),[v,m]=(0,e.useState)(null),[h,w]=(0,e.useState)(""),[g,f]=(0,e.useState)({message:"",type:""}),[j,y]=(0,e.useState)({clientId:"",clientSecret:""}),b=(0,e.useCallback)(function(e){f({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(()=>f({message:"",type:""}),5e3)},[]);(0,e.useEffect)(()=>{r(window.wpmudevDriveTest.authStatus||!1),a(window.wpmudevDriveTest.hasCredentials||!1);const e=new URLSearchParams(window.location.search),s=e.get("auth"),i=e.get("error_message");if("success"===s)r(!0),b((0,t.__)("Successfully authenticated with Google Drive!","wpmudev-plugin-test"),"success"),window.history.replaceState({},document.title,window.location.pathname);else if("error"===s){const e=i?decodeURIComponent(i):(0,t.__)("Authentication failed. Please try again.","wpmudev-plugin-test");b(e,"error"),window.history.replaceState({},document.title,window.location.pathname)}},[b]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"sui-header wpmudev-drive-header",children:[(0,x.jsx)("h1",{className:"sui-header-title",children:(0,t.__)("Google Drive Test","wpmudev-plugin-test")}),(0,x.jsx)("p",{className:"sui-description",children:(0,t.__)("Test Google Drive API integration for applicant assessment.","wpmudev-plugin-test")})]}),g.message&&(0,x.jsx)(i.Notice,{status:g.type,isDismissible:!0,onRemove:()=>f({message:"",type:""}),children:g.message}),o?(0,x.jsxs)("div",{className:"sui-box",children:[(0,x.jsx)("div",{className:"sui-box-header",children:(0,x.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Set Google Drive Credentials","wpmudev-plugin-test")})}),(0,x.jsxs)("div",{className:"sui-box-body",children:[(0,x.jsx)("div",{className:"sui-box-settings-row wpmudev-drive-scopes-row",children:(0,x.jsx)(i.TextControl,{help:(0,e.createInterpolateElement)((0,t.__)("You can get Client ID from <a>Google Cloud Console</a>. Make sure to enable Google Drive API.","wpmudev-plugin-test"),{a:(0,x.jsx)("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})}),label:(0,t.__)("Client ID","wpmudev-plugin-test"),value:j.clientId,onChange:e=>y(_(_({},j),{},{clientId:e}))})}),(0,x.jsx)("div",{className:"sui-box-settings-row wpmudev-drive-secret-row",children:(0,x.jsx)(i.TextControl,{help:(0,e.createInterpolateElement)((0,t.__)("You can get Client Secret from <a>Google Cloud Console</a>.","wpmudev-plugin-test"),{a:(0,x.jsx)("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})}),label:(0,t.__)("Client Secret","wpmudev-plugin-test"),value:j.clientSecret,onChange:e=>y(_(_({},j),{},{clientSecret:e})),type:"password"})}),(0,x.jsx)("div",{className:"sui-box-settings-row",children:(0,x.jsxs)("span",{children:[(0,t.__)("Please use this URL","wpmudev-plugin-test")," ",(0,x.jsx)("em",{children:window.wpmudevDriveTest.redirectUri})," ",(0,t.__)("in your Google API's Authorized redirect URIs field.","wpmudev-plugin-test")]})}),(0,x.jsxs)("div",{className:"sui-box-settings-row",style:{display:"flex",flexDirection:"column"},children:[(0,x.jsx)("strong",{style:{marginBottom:"6px"},children:(0,t.__)("Required scopes for Google Drive API:","wpmudev-plugin-test")}),(0,x.jsxs)("ul",{style:{margin:0,paddingLeft:"20px"},children:[(0,x.jsx)("li",{children:"https://www.googleapis.com/auth/drive.file"}),(0,x.jsx)("li",{children:"https://www.googleapis.com/auth/drive.readonly"})]})]})]}),(0,x.jsx)("div",{className:"sui-box-footer",children:(0,x.jsx)("div",{className:"sui-actions-right",children:(0,x.jsx)(i.Button,{className:"wpmudev-drive-primary",variant:"primary",onClick:async()=>{if(j.clientId.trim()&&j.clientSecret.trim())try{d(!0);const e=await fetch("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointSave),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce},body:JSON.stringify({client_id:j.clientId.trim(),client_secret:j.clientSecret.trim()})}),s=await e.json();if(!e.ok||null==s||!s.success){const e=(null==s?void 0:s.message)||(0,t.__)("Failed to save credentials. Please try again.","wpmudev-plugin-test");return void b(e,"error")}a(!0),l(!1),b((0,t.__)("Credentials saved successfully.","wpmudev-plugin-test"),"success")}catch(e){b((0,t.__)("An unexpected error occurred while saving credentials.","wpmudev-plugin-test"),"error")}finally{d(!1)}else b((0,t.__)("Both Client ID and Client Secret are required.","wpmudev-plugin-test"),"error")},disabled:c,children:c?(0,x.jsx)(i.Spinner,{}):(0,t.__)("Save Credentials","wpmudev-plugin-test")})})})]}):s?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"sui-box",children:[(0,x.jsx)("div",{className:"sui-box-header",children:(0,x.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Upload File to Drive","wpmudev-plugin-test")})}),(0,x.jsx)("div",{className:"sui-box-body",children:(0,x.jsxs)("div",{className:"sui-box-settings-row",children:[(0,x.jsx)("input",{type:"file",onChange:e=>m(e.target.files[0]),className:"drive-file-input"}),v&&(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:(0,t.__)("Selected:","wpmudev-plugin-test")})," ",v.name," (",Math.round(v.size/1024)," KB)"]})]})}),(0,x.jsx)("div",{className:"sui-box-footer",children:(0,x.jsx)("div",{className:"sui-actions-right",children:(0,x.jsx)(i.Button,{variant:"primary",onClick:async()=>{},disabled:c||!v,children:c?(0,x.jsx)(i.Spinner,{}):(0,t.__)("Upload to Drive","wpmudev-plugin-test")})})})]}),(0,x.jsxs)("div",{className:"sui-box",children:[(0,x.jsx)("div",{className:"sui-box-header",children:(0,x.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Create New Folder","wpmudev-plugin-test")})}),(0,x.jsx)("div",{className:"sui-box-body",children:(0,x.jsx)("div",{className:"sui-box-settings-row",children:(0,x.jsx)(i.TextControl,{label:(0,t.__)("Folder Name","wpmudev-plugin-test"),value:h,onChange:w,placeholder:(0,t.__)("Enter folder name","wpmudev-plugin-test")})})}),(0,x.jsx)("div",{className:"sui-box-footer",children:(0,x.jsx)("div",{className:"sui-actions-right",children:(0,x.jsx)(i.Button,{variant:"secondary",onClick:async()=>{},disabled:c||!h.trim(),children:c?(0,x.jsx)(i.Spinner,{}):(0,t.__)("Create Folder","wpmudev-plugin-test")})})})]}),(0,x.jsxs)("div",{className:"sui-box",children:[(0,x.jsxs)("div",{className:"sui-box-header",children:[(0,x.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Your Drive Files","wpmudev-plugin-test")}),(0,x.jsx)("div",{className:"sui-actions-right",children:(0,x.jsx)(i.Button,{variant:"secondary",onClick:async()=>{},disabled:c,children:c?(0,x.jsx)(i.Spinner,{}):(0,t.__)("Refresh Files","wpmudev-plugin-test")})})]}),(0,x.jsx)("div",{className:"sui-box-body",children:c?(0,x.jsxs)("div",{className:"drive-loading",children:[(0,x.jsx)(i.Spinner,{}),(0,x.jsx)("p",{children:(0,t.__)("Loading filesâ€¦","wpmudev-plugin-test")})]}):u.length>0?(0,x.jsx)("div",{className:"drive-files-grid",children:u.map(e=>(0,x.jsxs)("div",{className:"drive-file-item",children:[(0,x.jsxs)("div",{className:"file-info",children:[(0,x.jsx)("strong",{children:e.name}),(0,x.jsx)("small",{children:e.modifiedTime?new Date(e.modifiedTime).toLocaleDateString():(0,t.__)("Unknown date","wpmudev-plugin-test")})]}),(0,x.jsx)("div",{className:"file-actions",children:e.webViewLink&&(0,x.jsx)(i.Button,{variant:"link",size:"small",href:e.webViewLink,target:"_blank",children:(0,t.__)("View in Drive","wpmudev-plugin-test")})})]},e.id))}):(0,x.jsx)("div",{className:"sui-box-settings-row",children:(0,x.jsx)("p",{children:(0,t.__)("No files found in your Drive. Upload a file or create a folder to get started.","wpmudev-plugin-test")})})})]})]}):(0,x.jsxs)("div",{className:"sui-box wpmudev-drive-auth-box",children:[(0,x.jsx)("div",{className:"sui-box-header",children:(0,x.jsx)("h2",{className:"sui-box-title",children:(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test")})}),(0,x.jsx)("div",{className:"sui-box-body",children:(0,x.jsxs)("div",{className:"sui-box-settings-row wpmudev-drive-auth-row",children:[(0,x.jsxs)("div",{className:"wpmudev-drive-auth-copy",children:[(0,x.jsx)("p",{className:"wpmudev-drive-auth-intro",children:(0,t.__)("Connect your Google Drive account so we can run the test with real API calls.","wpmudev-plugin-test")}),(0,x.jsx)("p",{className:"wpmudev-drive-auth-note",children:(0,t.__)("We will never store your files. Access is limited to the scopes listed here.","wpmudev-plugin-test")})]}),(0,x.jsxs)("div",{className:"wpmudev-drive-auth-scopes",children:[(0,x.jsx)("p",{className:"wpmudev-drive-auth-scopes-title",children:(0,t.__)("This connection will be able to:","wpmudev-plugin-test")}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:(0,t.__)("View and manage Google Drive files","wpmudev-plugin-test")}),(0,x.jsx)("li",{children:(0,t.__)("Upload new files to Drive","wpmudev-plugin-test")}),(0,x.jsx)("li",{children:(0,t.__)("Create folders in Drive","wpmudev-plugin-test")})]})]})]})}),(0,x.jsxs)("div",{className:"sui-box-footer",children:[(0,x.jsx)("div",{className:"sui-actions-left",children:(0,x.jsx)(i.Button,{variant:"secondary",className:"wpmudev-drive-auth-change",onClick:()=>l(!0),children:(0,t.__)("Change Credentials","wpmudev-plugin-test")})}),(0,x.jsx)("div",{className:"sui-actions-right",children:(0,x.jsx)(i.Button,{className:"wpmudev-drive-auth-primary",variant:"primary",onClick:async()=>{if(n)try{d(!0);const e=await fetch("".concat(window.location.origin,"/wp-json/").concat(window.wpmudevDriveTest.restEndpointAuth),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpmudevDriveTest.nonce}}),s=await e.json();if(!e.ok||null==s||!s.success){const e=(null==s?void 0:s.message)||(null==s?void 0:s.code)||(0,t.__)("Failed to start authentication. Please try again.","wpmudev-plugin-test");return b(e,"error"),void d(!1)}s.auth_url?window.location.href=s.auth_url:(b((0,t.__)("Invalid response from server. Please try again.","wpmudev-plugin-test"),"error"),d(!1))}catch(e){b((0,t.__)("An unexpected error occurred while starting authentication.","wpmudev-plugin-test"),"error"),d(!1)}else b((0,t.__)("Please save your Google Drive credentials first.","wpmudev-plugin-test"),"error")},disabled:c,children:c?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.Spinner,{}),(0,t.__)("Connecting...","wpmudev-plugin-test")]}):(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test")})})]})]})]})};e.createRoot?(0,e.createRoot)(b).render((0,x.jsx)(e.StrictMode,{children:(0,x.jsx)(N,{})})):(0,e.render)((0,x.jsx)(e.StrictMode,{children:(0,x.jsx)(N,{})}),b)})()})();